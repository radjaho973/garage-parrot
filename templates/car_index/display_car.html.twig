{% extends 'base.html.twig' %}

{% block title %}{{car.brand.brand}} {{car.name}} {% endblock %}

{% block body %}
<div class="container-fluid py-2 rounded-bottom bg-dark gap-2 d-flex justify-content-start align-items-center">

  <a class="btn btn-dark" href="{{ path('app_car_index') }}">
    <i class="bi bi-caret-left"></i>
  </a>
    <h1 class="text-white">{{car.brand.brand}} <small class="text-capitalize">{{car.name}}</small></h1>
</div>

<div class="container mt-2">
    <div id="CarouselCar" data-bs-theme="dark" class="carousel slide">
      <div class="carousel-inner">
        {% for imageCollection in car.ImageCollection.Values %}
        <div class="carousel-item">
          <img class="rounded w-100 d-block" src="{{ asset("car_uploads/") ~ imageCollection.ImageUrl }}" class="d-block w-100" alt="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}">
        </div>
        {% endfor %}
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#CarouselCar" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#CarouselCar" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
</div>



  <div class="
  container border-bottom border-2 border-dark
  d-flex gap-5 align-items-center pb-2 pt-3
  ">
      <h2 class="font-weight-800"> {{car.brand.brand}} 
      <small class="text-capitalize text-body-secondary"> {{car.name}} </small>
      <small class="text-body-secondary"> {{car.yearPlacedInCirculation}} </small>
      </h2>
  </div>
<div class="container">
  <div class=" row car-items my-2">
      <div class="col-7 ">
        <div class="d-flex gap-2 ">
            <p class="fw-bold ">Prix  </p> <p>{{car.price}} €</p>
        </div>
        <div class="d-inline gap-2 ">
            <p class="fw-bold">Kilométrage  </p><p> {{car.mileage}} Km</p>
        </div>
        <div class="d-flex gap-2 ">
            <p class="fw-bold">1ère Mise en circulation</p>
            <p>{{car.YearPlacedInCirculation}}</p>
        </div>
      </div>
      <div class="col-4">
        <p> {{car.description}} </p>
      </div>
      
  </div>
</div>


{% endblock %}

{# Permet d'activer ou non le formulaire dans le footer de la page #}
{# l'affichage du formulaire dépend si l'utilisateur se trouve sur
cette vue  #}
{% set displayPage = 1 %}
 {% block contact_form %}

        {% include "car_index/_car_contact_form.html.twig" %}
        <script>
        // Script permettant de rajouter le nom et la marque de 
        // la voiture sur le formulaire
        let contactTitle = document.querySelector("#contact_title")
        let carTitle = document.title
        contactTitle.value = carTitle
        </script>

{% endblock %}
{% block script %}
<script>
// Récupère la première slide du carrousel et lui donne
// la propriété "active" sans quoi il ne fonctionnera pas 
let innerSlide = document.querySelector(".carousel-inner")

  innerSlide.firstElementChild.classList.add("active")
</script>
{% endblock %}











{# 
<div id="carouselExample" class="carousel slide">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}" class="d-block w-100" alt="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}">
    </div>
    <div class="carousel-item">
      <img src="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}" class="d-block w-100" alt="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}">
    </div>
    <div class="carousel-item">
      <img src="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}" class="d-block w-100" alt="{{ asset("car_uploads/") ~  car.ImageCollection.Values[0].ImageUrl }}">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div> #}
